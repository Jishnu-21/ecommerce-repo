<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="/global.css" />
    <link rel="stylesheet" href="/otp.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&display=swap"
    />
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
  </head>
  <body>
    <div class="otp">
      <div class="image-14-parent">
        <img class="image-14-icon" alt="" src="./public/image-14@2x.png" />
        <div class="benefits-image-dalle">
          <div class="brand">
            <iconify-icon icon="solar:bag-smile-bold" style="color: white;" width="43" height="43"></iconify-icon>
            <div class="brandname"> MarketPlace</div>
          </div>
        </div>
      </div>
      <div class="verify-otp-parent">
        <div class="verify-otp">Verify OTP</div>
        <br>
        <form action="/verify" class="login-container" method="POST">
          <input
            class="input-fields"
            name="otp2"
            placeholder="OTP"
            type="text"
          />
          <br>
          <a class="already-have-an" href="login">Already have an account?</a><br />
          <div id="timer"></div>
          <button class="button-wrapper">
            <br>
            <div class="button">
              <div class="style-layer">
                <div class="button1" type="submit">SUBMIT</div>
                <iconify-icon icon="maki:arrow" style="color: white;" width="15" height="15"></iconify-icon>
              </div>
            </div>
          </button>
        </form>
        <a class="resend-otp" id="resendLink" onclick="startTimer()">Resend OTP</a>
      </div>
    </div>

    <script>
      // Set the countdown time in seconds
      const countdownTime = 60;

      document.addEventListener('DOMContentLoaded', () => {
        // Hide the "Resend OTP" link initially
        const resendLink = document.getElementById('resendLink');
        resendLink.style.display = 'none';

        // Start the timer automatically
        startTimer();
      });

      function startTimer() {
        let seconds = countdownTime;

        const timerElement = document.getElementById('timer');
        const resendLink = document.getElementById('resendLink');

        const timerInterval = setInterval(() => {
          const minutes = Math.floor(seconds / 60);
          const remainingSeconds = seconds % 60;

          timerElement.innerHTML = `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;

          if (seconds <= 0) {
            clearInterval(timerInterval);
            timerElement.innerHTML = '';
            resendLink.style.display = 'inline'; // Show the "Resend OTP" link
          } else {
            seconds--;
          }
        }, 1000);
      }
    </script>
  </body>
</html>
